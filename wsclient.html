<!doctype html>
<html>
	<head></head>
	<body>
		<script src=".\task.js"></script>
		<script src=".\webmessage.js"></script>
		<script type="text/javascript">
		// have a try
		var c = new WebMessage('ws://localhost:12345/echo');
		let i = 100;
		while (i--) {
		c.call('getIndexArticles',{},{}).then((json)=>{
			// console.log('--USER: Response received.\n',json);
			console.log('--USER: Response received.');
		},(error)=>{
			console.log('--USER: Receive error:',error);
		});
		}
		c.disconnect();
		i = 3;
		while (i--) {
		c.call('getIndexArticles',{},{}).then((json)=>{
			// console.log('--USER: Response received.\n',json);
			console.log('--USER: Response received.');
		},(error)=>{
			console.warn('--USER: Receive error:',error);
		});
		}
		// disconnect
		// setTimeout(function(){
		// 	c.disconnect();
		// }, 5000)
		</script>
	</body>
</html>